Event.observe(window,"load",function(){var b=anselnodes.length;var e=new Array();for(var g=0;g<b;g++){var c=anselnodes[g];if(typeof anseljson[c]["lightbox"]!="undefined"){e=e.concat(anseljson[c]["lightbox"])}var a=$(c);if(anseljson[c]["perpage"]){var f=anseljson[c]["perpage"]}else{var f=anseljson[c]["data"].size()}for(var d=0;d<f;d++){(function(){var k=c;var j=d;var i=new Element("span",{className:"anselGalleryWidget"});if(!anseljson[k]["hideLinks"]){if(anseljson[k]["linkToGallery"]){var h=6}else{var h=5}var m=i.appendChild(new Element("a",{href:anseljson[k]["data"][j][h],title:anseljson[k]["data"][j][2]}));var l={image:anseljson[k]["data"][j][3]};m.appendChild(new Element("img",{src:anseljson[k]["data"][j][0]}));if(typeof anseljson[c]["lightbox"]!="undefined"){m.observe("click",function(n){ansel_lb.start(l.image);n.stop()})}}else{i.appendChild(new Element("img",{src:anseljson[k]["data"][j][0]}));if(typeof anseljson[c]["lightbox"]!="undefined"){m.observe("click",function(n){ansel_lb.start(l.image);n.stop()})}}a.appendChild(i)})()}if(anseljson[c]["perpage"]>0){(function(){var l=c;var h=new Element("a",{href:"#",title:"Next Image",className:"anselNext",style:"text-decoration:none;width:40%;float:right;"});h.update(">>");var k={node:l,page:1};h.observe("click",function(m){displayPage(m,k)});var i=new Element("a",{href:"#",title:"Previous Image",className:"anselPrev",style:"text-decoration:none;width:40%;float:right;"});i.update("<<");var j={node:l,page:-1};i.observe("click",function(m){displayPage(m,j)});$(l).appendChild(h);$(l).appendChild(i);Horde_ToolTips.attachBehavior(l);Event.observe(window,"unload",Horde_ToolTips.out.bind(Horde_ToolTips))})()}else{(function(){var h=c;Horde_ToolTips.attachBehavior(h)})()}}if(e.length){lbOptions.gallery_json=e;ansel_lb=new Lightbox(lbOptions)}Event.observe(window,"unload",Horde_ToolTips.out.bind(Horde_ToolTips))});function displayPage(b,o){var f=o.node;var n=o.page;var l=anseljson[f]["perpage"];var h=anseljson[f]["data"].size();var e=Math.ceil(h/l)-1;var p=anseljson[f]["page"];n=p+n;if(n>e){n=0}if(n<0){n=e}var d=$(f);d.update();var c=n*l;var g=Math.min(h-1,c+l-1);for(var k=c;k<=g;k++){var a=d.appendChild(new Element("span",{className:"anselGalleryWidget"}));var j=a.appendChild(new Element("a",{href:anseljson[f]["data"][k][5],alt:anseljson[f]["data"][k][2],title:anseljson[f]["data"][k][2]}));j.appendChild(new Element("img",{src:anseljson[f]["data"][k][0]}))}var q=new Element("a",{href:"",title:"Next Image",style:"text-decoration:none;width:40%;float:right;"});q.update(">>");var o={node:f,page:++p};q.observe("click",function(i){displayPage(i,o)}.bind());var m=new Element("a",{href:"",title:"Previous Image",style:"text-decoration:none;width:40%;float:right;"});m.update("<<");var o={node:f,page:--p};m.observe("click",function(i){displayPage(i,o)}.bind());d.appendChild(q);d.appendChild(m);Horde_ToolTips.attachBehavior(f);anseljson[f]["page"]=n;b.stop()};